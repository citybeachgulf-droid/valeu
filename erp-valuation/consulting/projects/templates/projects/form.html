{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <h3 class="mb-0">{% if mode == 'edit' %}ุชุนุฏูู ูุดุฑูุน{% else %}ุฅุถุงูุฉ ูุดุฑูุน{% endif %}</h3>
    <a href="{{ url_for('consulting_projects.list_projects') }}" class="btn btn-outline-secondary">โฉ๏ธ ุฑุฌูุน</a>
  </div>

  <form method="post" action="">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">ุงูุนููู</label>
        <select name="client_id" class="form-select" required>
          <option value="">ุงุฎุชุฑ ุงูุนููู</option>
          {% for c in clients %}
            <option value="{{ c.id }}" {% if data.client_id|int == c.id %}selected{% endif %}>{{ c.name }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">ุงุณู ุงููุดุฑูุน</label>
        <input type="text" name="name" class="form-control" value="{{ data.name or '' }}" required>
      </div>
      <div class="col-md-6">
        <label class="form-label">ููุน ุงููุดุฑูุน</label>
        <select name="type" class="form-select" required>
          <option value="">ุงุฎุชุฑ ุงูููุน</option>
          {% for t in PROJECT_TYPES %}
            <option value="{{ t }}" {% if data.type == t %}selected{% endif %}>{{ t }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-6">
        <label class="form-label">ุงููููุน</label>
        <input type="text" name="location" class="form-control" value="{{ data.location or '' }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">ุชุงุฑูุฎ ุงูุจุฏุก</label>
        <input type="date" name="start_date" class="form-control" value="{{ data.start_date or '' }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">ุชุงุฑูุฎ ุงูุงูุชูุงุก</label>
        <input type="date" name="end_date" class="form-control" value="{{ data.end_date or '' }}">
      </div>
      <div class="col-md-3">
        <label class="form-label">ุงูุญุงูุฉ</label>
        <select name="status" class="form-select" required>
          {% for s in PROJECT_STATUSES %}
            <option value="{{ s }}" {% if data.status == s %}selected{% endif %}>{{ s }}</option>
          {% endfor %}
        </select>
      </div>
      <div class="col-md-3">
        <label class="form-label">ูุณุจุฉ ุงูุฅูุฌุงุฒ</label>
        <input type="number" min="0" max="100" name="progress" class="form-control" value="{{ data.progress or 0 }}">
      </div>
      <div class="col-12">
        <label class="form-label">ุงููุตู</label>
        <textarea name="description" class="form-control" rows="4">{{ data.description or '' }}</textarea>
      </div>
    </div>

    <hr class="my-4">
    <div class="alert alert-info">
      ุฅุฐุง ูู ููู ุงูุนููู ููุฌูุฏูุงุ ููููู ุฅุถุงูุชู ููุง ูุณูุชู ุญูุธู ูุฑุจุทู ุจุงููุดุฑูุน ุชููุงุฆููุง.
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">ุงุณู ุงูุนููู ุงูุฌุฏูุฏ</label>
        <input type="text" name="new_client_name" class="form-control" value="{{ data.new_client_name or '' }}" placeholder="ุงุชุฑูู ูุงุฑุบูุง ุฅุฐุง ุงุฎุชุฑุช ุนููููุง ููุฌูุฏูุง">
      </div>
      <div class="col-md-6">
        <label class="form-label">ููุน ุงูุนููู</label>
        <select name="new_client_type" class="form-select">
          <option value="">ุงุฎุชุฑ ุงูููุน</option>
          {% if CLIENT_TYPES %}
            {% for t in CLIENT_TYPES %}
              <option value="{{ t }}" {% if data.new_client_type == t %}selected{% endif %}>{{ t }}</option>
            {% endfor %}
          {% endif %}
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">ูุงุชู ุงูุนููู</label>
        <input type="text" name="new_client_phone" class="form-control" value="{{ data.new_client_phone or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
        <input type="email" name="new_client_email" class="form-control" value="{{ data.new_client_email or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">ุงูุฑูู ุงูุถุฑูุจู</label>
        <input type="text" name="new_client_tax_number" class="form-control" value="{{ data.new_client_tax_number or '' }}">
      </div>
      <div class="col-12">
        <label class="form-label">ุงูุนููุงู</label>
        <input type="text" name="new_client_address" class="form-control" value="{{ data.new_client_address or '' }}">
      </div>
      <div class="col-12">
        <label class="form-label">ููุงุญุธุงุช</label>
        <textarea name="new_client_notes" class="form-control" rows="2">{{ data.new_client_notes or '' }}</textarea>
      </div>
    </div>

    <div class="mt-4 d-flex gap-2">
      <button type="submit" class="btn btn-primary">๐พ ุญูุธ</button>
      <a class="btn btn-secondary" href="{{ url_for('consulting_projects.list_projects') }}">ุฅูุบุงุก</a>
    </div>
  </form>
</div>
{% endblock %}
