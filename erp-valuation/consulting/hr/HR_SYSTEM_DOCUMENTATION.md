# ????? ???? ??????? ??????? ??????

## ???? ????

?? ????? ???? ???? ?????? ??????? ??????? ????? ???? ??????? ???????? ???????? ??? ???????? ????????.

## ??????? (Models) ???????

### 1. ????? ????????
- **Department**: ????? ???????
- **Employee**: ?????? ???????? ??????? (?????? ?????? ?????? ?????)

### 2. ?????? ????????
- **Attendance**: ????? ?????? ?????????
- **SalaryComponent**: ?????? ?????? (?????? ?????????)
- **Payroll**: ???? ??????? ???????
- **PayrollDetail**: ?????? ?????? ??????

### 3. ???????? ???????
- **LeaveType**: ????? ????????
- **LeaveBalance**: ???? ???????? ??? ????
- **LeaveRequest**: ????? ????????

### 4. ??????? ????????
- **PerformanceReview**: ??????? ?????? (????/??? ????/????)
- **EmployeeGoal**: ????? ????????
- **TrainingProgram**: ????? ???????
- **TrainingParticipant**: ??????? ?? ???????

### 5. ???????
- **JobPosting**: ??????? ???????
- **Candidate**: ????????
- **JobApplication**: ????? ???????
- **Interview**: ?????????

### 6. ????????? ?????????
- **EmployeeDocument**: ??????? ????????
- **DocumentAlert**: ??????? ?????? ?????????

## ??????? (Forms) ??????? ?? ????????

?? ????? ???? ?????? ??????? ?? `forms.py`:
- `validate_employee_form()`: ?????? ?? ?????? ??????
- `validate_attendance_form()`: ?????? ?? ??? ??????
- `validate_payroll_form()`: ?????? ?? ??? ??????
- `validate_leave_request_form()`: ?????? ?? ??? ???????
- `validate_performance_review_form()`: ?????? ?? ????? ??????
- `validate_employee_goal_form()`: ?????? ?? ??? ??????
- `validate_job_posting_form()`: ?????? ?? ????? ?????
- `validate_candidate_form()`: ?????? ?? ?????? ??????
- `validate_interview_form()`: ?????? ?? ?????? ????????

## ????? ????? ???????

?? ????? ???? ????? ??????? ??? ???:
- `EMPLOYEE_STATUSES`: ????? ????????
- `EMPLOYMENT_TYPES`: ????? ???????
- `LEAVE_REQUEST_STATUSES`: ????? ????? ????????
- `ATTENDANCE_STATUSES`: ????? ??????
- `PAYROLL_STATUSES`: ????? ???????
- `PERFORMANCE_REVIEW_STATUSES`: ????? ?????????
- `JOB_POSTING_STATUSES`: ????? ??????? ???????
- ??????...

## ?????? ???????? ?????? ??????

### 1. ????? ????? ????????
```python
# ?? Python shell ?? ??? init:
from erp_valuation import app, db
from consulting.hr.models import *

with app.app_context():
    db.create_all()
```

### 2. ????? Routes (???????)

??? ????? Routes ??????? ?? `routes.py`:

#### ????? ????????
- `/consulting/employees` - ????? ????????
- `/consulting/employees/new` - ????? ???? ????
- `/consulting/employees/<id>/edit` - ????? ????
- `/consulting/employees/<id>` - ?????? ??????
- `/consulting/employees/<id>/documents` - ????? ??????? ??????
- `/consulting/departments` - ????? ???????

#### ?????? ????????
- `/consulting/attendance` - ????? ??????
- `/consulting/attendance/new` - ????? ???? ????
- `/consulting/payroll` - ???? ???????
- `/consulting/payroll/new` - ????? ??? ????
- `/consulting/payroll/<id>` - ?????? ??? ??????
- `/consulting/salary-components` - ????? ?????? ??????

#### ????????
- `/consulting/leaves` - ????? ????? ????????
- `/consulting/leaves/new` - ??? ????? ????
- `/consulting/leaves/<id>/approve` - ???????? ??? ?????
- `/consulting/leaves/<id>/reject` - ??? ?????
- `/consulting/leave-balances` - ????? ????????
- `/consulting/leave-types` - ????? ????????

#### ??????? ????????
- `/consulting/performance` - ????? ?????????
- `/consulting/performance/new` - ????? ????
- `/consulting/goals` - ????? ????????
- `/consulting/goals/new` - ??? ????
- `/consulting/training` - ????? ???????
- `/consulting/training/<id>/enroll` - ????? ?? ?????? ??????

#### ???????
- `/consulting/jobs` - ??????? ???????
- `/consulting/jobs/new` - ????? ?????
- `/consulting/candidates` - ????????
- `/consulting/candidates/new` - ???? ????
- `/consulting/applications` - ????? ???????
- `/consulting/interviews` - ?????????
- `/consulting/interviews/new` - ?????? ?????

#### ????????
- `/consulting/reports/employees` - ?????? ????????
- `/consulting/reports/attendance` - ?????? ??????
- `/consulting/reports/payroll` - ?????? ???????
- `/consulting/reports/export` - ????? ???????? (Excel/PDF)

### 3. ????? Templates (???????)

??? ????? Templates HTML ??? Route ????? ?? ???? `templates/hr/`:

#### ????????
- `employees.html` - ????? ????????
- `employee_form.html` - ????? ?????/????? ????
- `employee_detail.html` - ?????? ??????
- `employee_documents.html` - ??????? ??????

#### ?????? ????????
- `attendance.html` - ????? ??????
- `attendance_form.html` - ????? ????? ????
- `payroll.html` - ???? ???????
- `payroll_form.html` - ????? ??? ????
- `payroll_detail.html` - ?????? ??? ??????

#### ????????
- `leaves.html` - ????? ????????
- `leave_form.html` - ????? ??? ?????
- `leave_balances.html` - ????? ????????

#### ???????
- `performance.html` - ?????????
- `performance_form.html` - ????? ?????
- `goals.html` - ???????
- `goal_form.html` - ????? ???

#### ???????
- `jobs.html` - ??????? ???????
- `job_form.html` - ????? ?????
- `candidates.html` - ????????
- `candidate_form.html` - ????? ????
- `applications.html` - ????? ???????
- `interviews.html` - ?????????
- `interview_form.html` - ????? ??????

#### ????????
- `reports_employees.html` - ?????? ????????
- `reports_attendance.html` - ?????? ??????
- `reports_payroll.html` - ?????? ???????

### 4. ????? Dashboard ???????

??? ????? `dashboard.html` ?????:
- KPIs ?????? (??? ????????? ??????? ???????? ???????? ???)
- ????? ?????? ?????? ??? ???????
- ?????? ????? ??? ???
- ??????? ????????? ???????? ????????

### 5. ???? ?????????

??? ????? ????? ?????? ?? ????????? ???????? ????????:
```python
def check_expiring_documents(days_before=30):
    """?????? ?? ????????? ???? ?????? ???? ???? ?????"""
    from datetime import date, timedelta
    from .models import EmployeeDocument, DocumentAlert
    
    expiry_date = date.today() + timedelta(days=days_before)
    expiring_docs = EmployeeDocument.query.filter(
        EmployeeDocument.expiry_date <= expiry_date,
        EmployeeDocument.expiry_date >= date.today()
    ).all()
    
    for doc in expiring_docs:
        # ????? ????? ??? ?? ??? ?????
        alert = DocumentAlert.query.filter_by(
            document_id=doc.id,
            status='???'
        ).first()
        
        if not alert:
            alert = DocumentAlert(
                document_id=doc.id,
                employee_id=doc.employee_id,
                alert_type='?????',
                days_before_expiry=days_before,
                expiry_date=doc.expiry_date,
                status='???'
            )
            db.session.add(alert)
    
    db.session.commit()
```

### 6. ??????? ?????? (Role-Based Access Control)

??? ????? ???? `_require_roles()` ?? `routes.py` ???? ??????? ???????:
- `hr_manager`: ???? ??????? ??????? - ??????? ?????
- `hr_staff`: ???? ??????? ??????? - ??????? ??????
- `manager`: ???? ????? - ????? ???????? ??? ????????
- `employee`: ???? ???? - ????? ??? ??????? ???

### 7. ????? ????????

??? ????? ????? ?????? ????????:
- ????? Excel ???????? `openpyxl` ?? `pandas`
- ????? PDF ???????? `reportlab` (????? ??????)

### 8. ?????????

- ??? ?? ?????? ?????? (??? ?????)
- ??? ?? ????? ??????? ??????? (Google Drive/OneDrive) - ???????

## ??????? ??????

1. **????? ???????? ???????**: ??? ????? ???????? ??????? ??? ??????? ?????? ??????
2. **??????? ??????**: ?? ???? ??? ?? ??? ??? ???????? ??????? ?? ???
3. **??? ?????????**: ???? ???? ????????? ?? ???????? ???????
4. **????? ?????????**: ????? ?????? ????????? ??????

## ??????? ???????

1. ????? ????? ???????? (db.create_all())
2. ????? Routes ????????
3. ????? Templates ????????
4. ?????? ??????
5. ????? ??????? ???????? (????????? ???????? ?????????)

## ???? ??? ??????? ??????

```python
# ????? ???? ????
from consulting.hr.models import Employee, Department
from consulting.hr.forms import validate_employee_form

# ?????? ?? ????????
data, errors = validate_employee_form(request.form)
if not errors:
    employee = Employee(**data)
    db.session.add(employee)
    db.session.commit()

# ????? ????
from consulting.hr.models import Attendance
attendance = Attendance(
    employee_id=1,
    attendance_date=date.today(),
    check_in=datetime.now(),
    status='????'
)
db.session.add(attendance)
db.session.commit()
```

## ???????

?? ????? ?????? ???????? ??????? ????? ??????? ???????. ??????? ??:
1. ????? Routes ????? ???????
2. ????? Templates HTML
3. ?????? ?????? ?????? ???????
4. ????? ??????? ????????

???? ??????? ????????? ????? ?????????.
