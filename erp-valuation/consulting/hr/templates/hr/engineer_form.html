{% extends 'base.html' %}

{% block content %}
<div class="container py-4">
  <div class="d-flex flex-wrap align-items-start justify-content-between gap-3 mb-4">
    <div>
      <h3 class="mb-1">
        {% if mode == 'create' %}
          ????? ????? ????
        {% else %}
          ????? ?????? ???????
        {% endif %}
      </h3>
      <p class="text-muted small mb-0">
        {% if mode == 'create' %}
          ???? ?????? ??????? ???? ????? ????? ?? ??? ?????????? ??????? ????????.
        {% else %}
          ???? ???????? ???????? ??????? ????? ?? ????? ?????? ???????.
        {% endif %}
      </p>
    </div>
    <div class="d-flex flex-wrap gap-2">
      {% if engineer %}
      <a class="btn btn-outline-secondary" href="{{ url_for('consulting_hr.engineer_detail', engineer_id=engineer.id) }}">??? ??? ???????</a>
      {% endif %}
      <a class="btn btn-outline-secondary" href="{{ url_for('consulting_hr.list_engineers') }}">????? ?????????</a>
      <a class="btn btn-outline-secondary" href="{{ url_for('consulting_hr.dashboard') }}">???? HR</a>
    </div>
  </div>

  <form method="post" class="row g-3" novalidate>
    <div class="col-md-6">
      <label class="form-label">????? ??????</label>
      <input type="text" class="form-control {% if form_errors.get('name') %}is-invalid{% endif %}" name="name" value="{{ form_values.name }}" required>
      {% if form_errors.get('name') %}<div class="invalid-feedback d-block">{{ form_errors.get('name') }}</div>{% endif %}
    </div>
    <div class="col-md-3">
      <label class="form-label">??????</label>
      <select class="form-select {% if form_errors.get('specialty') %}is-invalid{% endif %}" name="specialty" required>
        <option value="">-- ???? ?????? --</option>
        {% for sp in ENGINEER_SPECIALTIES %}
        <option value="{{ sp }}" {% if form_values.specialty==sp %}selected{% endif %}>{{ sp }}</option>
        {% endfor %}
      </select>
      {% if form_errors.get('specialty') %}<div class="invalid-feedback d-block">{{ form_errors.get('specialty') }}</div>{% endif %}
    </div>
    <div class="col-md-3">
      <label class="form-label">??????</label>
      <select class="form-select {% if form_errors.get('status') %}is-invalid{% endif %}" name="status">
        {% for st in ENGINEER_STATUSES %}
        <option value="{{ st }}" {% if form_values.status==st %}selected{% endif %}>{{ st }}</option>
        {% endfor %}
      </select>
      {% if form_errors.get('status') %}<div class="invalid-feedback d-block">{{ form_errors.get('status') }}</div>{% endif %}
    </div>

    <div class="col-md-4">
      <label class="form-label">??????</label>
      <input type="text" class="form-control" name="phone" value="{{ form_values.phone }}">
    </div>
    <div class="col-md-4">
      <label class="form-label">?????? ??????????</label>
      <input type="email" class="form-control {% if form_errors.get('email') %}is-invalid{% endif %}" name="email" value="{{ form_values.email }}">
      {% if form_errors.get('email') %}<div class="invalid-feedback d-block">{{ form_errors.get('email') }}</div>{% endif %}
    </div>
    <div class="col-md-4">
      <label class="form-label">????? ????????</label>
      <input type="date" class="form-control {% if form_errors.get('join_date') %}is-invalid{% endif %}" name="join_date" value="{{ form_values.join_date }}">
      {% if form_errors.get('join_date') %}<div class="invalid-feedback d-block">{{ form_errors.get('join_date') }}</div>{% endif %}
    </div>

    <div class="col-12">
      <div class="alert alert-light border small mb-0">
        <strong>?????:</strong> ??????? ?????? ??????? ?????? ???? ??????? ?? ?????? ?????????? ??????? ???????.
      </div>
    </div>

    <div class="col-12 d-flex justify-content-between align-items-center mt-2">
      <a class="btn btn-outline-secondary" href="{{ url_for('consulting_hr.list_engineers') }}">?????</a>
      <button class="btn btn-primary" type="submit">
        {% if mode == 'create' %}?? ??? ???????{% else %}?? ????? ????????{% endif %}
      </button>
    </div>
  </form>
</div>
{% endblock %}
