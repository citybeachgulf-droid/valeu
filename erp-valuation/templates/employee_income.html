<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>๐ ุชูุฑูุฑ ุฏุฎู ุงูููุธู</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light" data-back-button-label="{{ role_home_label }}" data-back-button-fallback="{{ role_home_url }}">

<div class="container py-4">
  <h2 class="mb-4">๐ ุชูุฑูุฑ ุฏุฎู ุงูููุธู</h2>

  <!-- ูููุฐุฌ ุงูููุชุฑุฉ -->
  <form method="POST" class="row g-3 mb-4">
    <div class="col-md-4">
      <label class="form-label">ุงุฎุชุฑ ุงูููุธู:</label>
      <select name="employee_id" class="form-select" required>
        <option value="">-- ุงุฎุชุฑ --</option>
        {% for emp in employees %}
          <option value="{{ emp.id }}" {% if selected_emp==emp.username %}selected{% endif %}>
            {{ emp.username }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-3">
      <label class="form-label">ูู:</label>
      <input type="date" name="start_date" value="{{ start_date or '' }}" class="form-control">
    </div>

    <div class="col-md-3">
      <label class="form-label">ุฅูู:</label>
      <input type="date" name="end_date" value="{{ end_date or '' }}" class="form-control">
    </div>

    <div class="col-md-2 d-flex align-items-end">
      <button type="submit" class="btn btn-primary w-100">ุนุฑุถ</button>
    </div>
  </form>

  {% if income is not none %}
    <!-- ุจุทุงูุฉ ุงูุฏุฎู -->
    <div class="card shadow-sm mb-4">
      <div class="card-body text-center">
        <h4>๐ฐ ุฅุฌูุงูู ุฏุฎู ุงูููุธู <span class="text-primary">"{{ selected_emp }}"</span></h4>
        <p class="fs-3 text-success">{{ income }} ุฑูุงู</p>
      </div>
    </div>

    <!-- ุฌุฏูู ุงููุนุงููุงุช -->
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="mb-3">๐ ุชูุงุตูู ุงููุนุงููุงุช</h5>
        <table class="table table-bordered table-striped">
      <thead class="table-dark">
  <tr>
    <th>#</th>
    <th>ุงูุนููู</th>
    <th>ุงูุชุงุฑูุฎ</th>
    <th>ุงูุญุงูุฉ</th>
    <th>ุงููุจูุบ ุงููุญุตู</th>
    <th>ุญุงูุฉ ุงูุฏูุน</th> <!-- ุฌุฏูุฏ -->
  </tr>
</thead>
<tbody>
  {% for t in transactions %}
  <tr>
    <td>{{ t.id }}</td>
    <td>{{ t.client }}</td>
    <td>{{ t.date }}</td>
    <td>{{ t.status }}</td>
    <td>{{ t.fee }} ุฑูุงู</td>
    <td>
      {% if t.payment_status == "ูุฏููุนุฉ" %}
        <span class="badge bg-success">ูุฏููุนุฉ โ</span>
      {% else %}
        <span class="badge bg-danger">ุบูุฑ ูุฏููุนุฉ โ</span>
      {% endif %}
    </td>
  </tr>
  {% else %}
  <tr>
    <td colspan="6" class="text-center">ูุง ุชูุฌุฏ ูุนุงููุงุช ูู ูุฐู ุงููุชุฑุฉ</td>
  </tr>
  {% endfor %}
</tbody>

        </table>
      </div>
    </div>
  {% endif %}
</div>

  <script defer src="{{ url_for('static', filename='js/back-button.js') }}"></script>
</body>
</html>
